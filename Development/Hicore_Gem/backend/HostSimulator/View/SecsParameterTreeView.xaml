<UserControl x:Class="HostSimulator.View.SecsParameterTreeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:HostSimulator.View">

    <UserControl.Resources>

        <!-- Converter -->
        <local:ShowValueConverter x:Key="ShowValueConverter"/>

        <!-- Recursive template -->
        <HierarchicalDataTemplate DataType="{x:Type local:SecsParameter}"
                                  ItemsSource="{Binding Children}">
            <StackPanel Orientation="Horizontal" Margin="2,1">

                <!-- Name -->
                <TextBlock Text="{Binding Name}" />

                <!-- Data Type -->
                <TextBlock Text=" (" />
                <TextBlock Text="{Binding DataType}" />
                <TextBlock Text=")" />

                <!-- Optional value -->
                <TextBlock Text=" = "
                           Visibility="{Binding Children.Count,
                                Converter={StaticResource ShowValueConverter}}" />

                <TextBlock Text="{Binding Value}"
                           Visibility="{Binding Children.Count,
                                Converter={StaticResource ShowValueConverter}}" />

            </StackPanel>
        </HierarchicalDataTemplate>

    </UserControl.Resources>

    
    <!-- MAIN CONTROL -->
    <TreeView ItemsSource="{Binding Parameters}"
              BorderThickness="1"
              BorderBrush="Gray"
              Padding="4" />

</UserControl>
